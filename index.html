<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <meta charset="UTF-8" />
  <title>Way of the Tiger Character Sheet</title>
  
<link rel="stylesheet" href="styles.css">
  
</head>
<body>
  <div class="scroll">
    <h1>üêÖ Way of the Tiger Character Sheet</h1>
    <div class="scroll-inner">
      <div class="section">
        <div class="stat-row">
          <div class="stat-group">
            <label for="name">Character Name</label>
            <input type="text" id="name" />
          </div>
          <div class="stat-group" style="flex:0 0 auto;">
            <label for="location">Current Location</label>
            <select id="location" class="chunky-dropdown"></select>

          </div>
        </div>
      </div>

      <div class="section">
        <div class="stat-row">
          <div class="stat-group" style="flex:0 0 auto;">
            <label for="punch">Punch</label>
     
	<select id="punch" class="chunky-dropdown"></select>
          </div>
          <div class="stat-group" style="flex:0 0 auto;">
            <label for="kick">Kick</label>
            <select id="kick" class="chunky-dropdown"></select>

          </div>
          <div class="stat-group" style="flex:0 0 auto;">
            <label for="_throw">Throw</label>
            <select id="_throw" class="chunky-dropdown"></select>

          </div>
          <div class="stat-group" style="flex:0 0 auto;">
  <label for="shurikens">Shurikens</label>
  <div style="display: flex; align-items: center; gap: 8px;">
    <select id="shurikens" class="chunky-dropdown"></select>
    <i class="fa-regular fa-star shuriken-icon"></i>
  </div>
</div>
        </div>
      </div>

      <div class="section">
        <div class="stat-row">
          <div class="stat-group" style="flex:0 0 auto;">
            <label for="fate">Fate Modifier</label>
            <select id="fate" class="chunky-dropdown"></select>

          </div>
          <div class="stat-group" style="flex:0 0 auto;">
            <label for="innerForce">Inner Force</label>
            <select id="innerForce" class="chunky-dropdown"></select>
          </div>
          <div class="stat-group" style="flex:0 0 auto;">
              <label for="endurance">Endurance</label>
	      <select id="endurance" class="chunky-dropdown"></select>
	  </div>
          <div style="display: flex; align-items: center; gap: 8px;">
    
         <div id="diceContainer">
  <i class="fas fa-dice-six dice-icon" id="die1"></i>
  <i class="fas fa-dice-four dice-icon" id="die2"></i>
</div>
<button onclick="rollBothDice()">üé≤ Roll Dice</button>


</div>
        </div>
      </div>

      <div class="section">
        <label for="ninjatools">Ninja Tools</label>
        <textarea id="ninjatools" placeholder="Comma-separated (e.g. Acrobatics, Poison)"></textarea>

        <label for="items">Items</label>
        <textarea id="items" placeholder="Comma-separated (e.g. Shuriken, Healing Potion)"></textarea>

        <label for="notes">Notes</label>
        <textarea id="notes" placeholder="Notes about your journey, o shadow-walker..."></textarea>
      </div>

      <div class="button-row">
        <button onclick="generateCode()">Generate Save Code</button>
        <button onclick="loadCode()">Load from Code</button>
      </div>

      <div class="section">
        <label for="saveCode">Paste Save Code Here</label>
        <input type="text" id="saveCode" />
        <div class="note">Tip: Your save code is a set of four themed words. Keep it secret; keep it safe.</div>
      </div>

      <div id="codeOutput"></div>
    </div>
  </div>

  <script>
    const wordList = [
      "silent","shadow","iron","fist","tiger","lotus","strike","wind","flame","venom",
      "jade","blade","honour","spirit","claw","night","storm","echo","dragon","whisper"
    ];

    function encodeToWords(data) {
      const json = JSON.stringify(data);
      let hash = 0;
      for (let i = 0; i < json.length; i++) {
        hash = (hash << 5) - hash + json.charCodeAt(i);
        hash |= 0;
      }
      const words = [];
      for (let i = 0; i < 4; i++) {
        const index = Math.abs((hash >> (i * 8)) & 0xff) % wordList.length;
        words.push(wordList[index]);
      }
      return words.join("-");
    }

    function decodeFromWords(code) {
      const saved = localStorage.getItem(code);
      return saved ? JSON.parse(saved) : null;
    }

    function generateCode() {
  const character = {
    name: document.getElementById('name').value,
    endurance: document.getElementById('endurance').value,
    innerForce: document.getElementById('innerForce').value,
    shurikens: document.getElementById('shurikens').value,
    fate: document.getElementById('fate').value,
    location: document.getElementById('location').value,
    ninjatools: document.getElementById('ninjatools').value,
    punch: document.getElementById('punch').value,
    kick: document.getElementById('kick').value,
    _throw: document.getElementById('_throw').value,
    items: document.getElementById('items').value,
    notes: document.getElementById('notes').value
  };

  const code = encodeToWords(character);
  localStorage.setItem(code, JSON.stringify(character));
  document.getElementById('codeOutput').textContent = "Save Code:\n" + code;
}

function rollBothDice() {
  const die1 = document.getElementById("die1");
  const die2 = document.getElementById("die2");

  const faces = ["one", "two", "three", "four", "five", "six"];

  let rollCount = 0;
  const maxRolls = 10;
  const interval = setInterval(() => {
    const temp1 = faces[Math.floor(Math.random() * 6)];
    const temp2 = faces[Math.floor(Math.random() * 6)];
    die1.className = `fas fa-dice-${temp1} dice-icon`;
    die2.className = `fas fa-dice-${temp2} dice-icon`;
    rollCount++;
    if (rollCount >= maxRolls) {
      clearInterval(interval);
      const final1 = faces[Math.floor(Math.random() * 6)];
      const final2 = faces[Math.floor(Math.random() * 6)];
      die1.className = `fas fa-dice-${final1} dice-icon`;
      die2.className = `fas fa-dice-${final2} dice-icon`;
    }
  }, 80); // Speed of face changes
}


function createDropdown(id, min, max, defaultValue = "") {
  const select = document.getElementById(id);
  select.innerHTML = "";

  const defaultOption = document.createElement("option");
  defaultOption.value = "";
  defaultOption.textContent = "--";
  select.appendChild(defaultOption);

  for (let i = min; i <= max; i++) {
    const option = document.createElement("option");
    option.value = i;
    option.textContent = i;
    if (String(i) === String(defaultValue)) {
      option.selected = true;
    }
    select.appendChild(option);
  }
}
createDropdown("location", 1, 430,1);
  createDropdown("punch", -5, 5,0);
createDropdown("kick", -5, 5,0);
createDropdown("_throw", -5, 5,0);
createDropdown("shurikens", 0, 9,5);
createDropdown("fate", -5, 5,0);
createDropdown("innerForce", -5, 10,5);
createDropdown("endurance", 0, 20,20);

    function loadCode() {
      const code = document.getElementById('saveCode').value.trim();
      const character = decodeFromWords(code);
      if (character) {
        document.getElementById('name').value = character.name || "";
        document.getElementById('punch').value = character.punch || "";
        document.getElementById('kick').value = character.kick || "";
        document.getElementById('_throw').value = character._throw || "";
        document.getElementById('endurance').value = character.endurance || "";
        document.getElementById('innerForce').value = character.innerForce || "";
        document.getElementById('shurikens').value = character.shurikens || "";
        document.getElementById('fate').value = character.fate || "";
        document.getElementById('location').value = character.location || "";
        document.getElementById('ninjatools').value = character.ninjatools || "";
        document.getElementById('items').value = character.items || "";
        document.getElementById('notes').value = character.notes || "";
        document.getElementById('codeOutput').textContent = "Character loaded from code!";
      } else {
        document.getElementById('codeOutput').textContent = "Invalid or unknown code.";
      }
    }
  </script>
</body>
</html>
